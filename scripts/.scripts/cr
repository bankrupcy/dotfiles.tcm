#!/usr/bin/env bash

if [ -z "$1" ]; then
    echo "Please give a file to compile and run."
    exit
fi

filename="$1"

filename="${filename%.*}"

printf "g++ $1 -o $filename -std=c++17 -O2 -Wall -Wextra -pedantic -Wshadow -Wformat=2 -Wfloat-equal -Wconversion -Wlogical-op -Wshift-overflow=2 -Wduplicated-cond -Wcast-qual -Wcast-align -Wno-unused-result -Wno-sign-conversion\n"

g++ $1 -o $filename -std=c++17 -O2 -Wall -Wextra -pedantic -Wshadow -Wformat=2 -Wfloat-equal -Wconversion -Wlogical-op -Wshift-overflow=2 -Wduplicated-cond -Wcast-qual -Wcast-align -Wno-unused-result -Wno-sign-conversion

printf "Compiled...\n\n"

printf "|--------|\n\n"

# replace gtime with time on linux operating systems
gtime -f '\n|--------|\n\n  real\t%E\n  user\t%U\n  sys\t%S\n  mem\t%MKB\n' ./$filename

"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5713],{95289:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(67294),r=a(94184),l=a.n(r),i=a(28760),o=a(62312),s=a(41374),c=a(20246),m=a(58238),u=a(91883),d=a(30005),g=a(36652),E=a(21691),p=a(28248);const y=({heading:e,selected:t,onSelect:a,options:r,sortOrder:l})=>{let o;return l&&(l===p.kn.ASC||l===p.kn.SECONDARY_ASC?o=n.createElement(m.C,{iconSize:16}):l!==p.kn.DESC&&l!==p.kn.SECONDARY_DESC||(o=n.createElement(u.B,{iconSize:16}))),n.createElement(d.v,null,e?n.createElement(g.F,null,e):null,r.map((({key:e,value:r})=>n.createElement(E.s,{role:"menuitemradio","aria-checked":e===t.key&&!o,key:e,onClick:()=>a(e),icon:e===t.key&&o},n.createElement(i.Dy,{variant:"mesto"},r)))))},k="w6j_vX6SF5IxSXrrkYw5",h="CbHJjxYxldG7uUPMYMaP";const f=({heading:e,options:t,selected:a,onSelect:r,isSelectionChanged:m,sortOrder:u,variant:d="mesto",semanticColor:g,disabled:E,onClick:p})=>{const[f]=t;a||(a=f);const b=m?m(a):a!==f;return n.createElement(c.y,{menu:n.createElement(y,{selected:a,options:t,onSelect:r,sortOrder:u,heading:e})},((e,t,r)=>n.createElement("button",{className:l()(k,{[h]:b}),onClick:e=>{E||(p?.(e),t(e))},ref:r,type:"button"},n.createElement(i.Dy,{semanticColor:g,variant:d},a.value),e?n.createElement(o.U,{iconSize:16}):n.createElement(s.i,{iconSize:16}))))}},47917:(e,t,a)=>{a.d(t,{V:()=>R,e:()=>A});var n=a(67294),r=a(28216),l=a(69518),i=a.n(l),o=a(33702),s=a(84629),c=a(43914),m=a(25988),u=a(68556),d=a(95806),g=a(99191),E=a(56802),p=a(38894),y=a(80219),k=a(18261),h=a(62975),f=a(87257),b=a(57978),v=a(75016),C=a(42922),S=a(18864),P=a(52759),w=a(54444),N=a(7073),x=a(84788);function A(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const I=e=>`activation-trigger-mme-${e}`,R=n.memo((function({index:e,showMetadata:t,episode:a,usePlayContextItem:l}){const R=(0,r.oR)().getState().platform?.isBrowser,U=a.playedState.playPositionMilliseconds,D=a.uri,F=(0,n.useRef)(null),[M,z]=(0,n.useState)(a.playedState.state===N.sY.Completed),B=(0,g.O1)(),O=(0,p.g)(),L=(0,S.jh)(),T=(0,E.o)(),_=(0,r.I0)(),{UBIFragment:G,spec:X,logger:W}=(0,w.fU)(o.createDesktopEpisodeBlockEventFactory,{data:{uri:D,reason:a.requestId||"",position:e}}),j=(0,w.Wi)(X),{isActive:H,isPlaying:Y,togglePlay:q}=l({uri:D}),[Z]=(0,P.z)(1e4,(e=>e?.item?.uri===D));(0,n.useEffect)((()=>{Y&&(F.current=Z)}),[Y,Z]),(0,n.useEffect)((()=>{!Y&&F.current&&a.duration.milliseconds<=F.current&&z(!0)}),[Y,a.duration.milliseconds]);const V=(0,n.useCallback)((e=>{e||(F.current=0),z(e)}),[]),K=A(t),$=(0,y.s)({...a,coverArt:{sources:a.coverArt}},K),J=(0,n.useCallback)((()=>{if(a.episodeType===N.Wf.Episode&&R)h.y.set((()=>({triggerId:I(a.uri),triggerAction:null})));else if(O)$();else{let e;e=Y?X.playButtonFactory().hitPause({itemToBePaused:D}):H?X.playButtonFactory().hitResume({itemToBeResumed:D}):X.playButtonFactory().hitPlay({itemToBePlayed:D});const t=W.logInteraction(e);T({targetUri:D,intent:Y?"pause":"play",type:"click"}),q({loggingParams:t})}}),[H,$,T,q,D,Y,O,a,R,W,X]),Q=(0,n.useCallback)((()=>{W.logInteraction(X.hitUiNavigate({destination:D})),T({type:"click",targetUri:D,intent:"navigate"})}),[D,T,W,X]),ee=a.podcastSubscription?.isPaywalled??!1,te=a.podcastSubscription?.isUserSubscribed??!1,ae=ee&&!te,ne=ee&&O,{badges:re}=(0,x.r)({contentRating:a.contentRating?.label,isPaywalled:ee}),le=(0,n.useCallback)((()=>_((0,s.RM)(t.uri))),[t.uri,_]),ie=(0,n.useCallback)((e=>{let r=e;return(ae||ne)&&(r=n.createElement(d.l,{enabled:!0,showUri:t.uri},r)),!a.playability.playable&&re.nineteen&&(r=n.createElement("div",{onClick:e=>{e.stopPropagation(),le()}},e)),r=n.createElement(c.D,{id:I(D),targetURI:i().from(D)},r),r}),[D,ae,ne,t.uri,re.nineteen,a.playability.playable,le]);return n.createElement(G,{spec:X},n.createElement(C.ZP,{value:"row",index:e},n.createElement(k._,{onShow:()=>{W.logInteraction(X.secondaryHitUiReveal())},menu:n.createElement(m.k,{uri:D,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:M,onMarkAsPlayed:V})},n.createElement(u.X,{ref:j,requestId:a.requestId,index:e,uri:D,size:L,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||ae,fullyPlayed:M,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:F.current??U,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const n=`${a.name} â€¢ ${t.name}`;B(e,[D],n,t.uri)},handlePlaybackClick:J,handleClick:Q,isCurrentlyPlaying:H,isPaywalled:ee,isUserSubscribed:te,isPlaying:Y,position:Y?Z:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:V,contentInformation:a.contentInformation,badges:n.createElement(n.Fragment,null,re.explicit&&n.createElement(f.N,null),re.paid&&n.createElement(v.g,null),re.nineteen&&n.createElement(b.X,{size:16})),playButtonWrapper:ie,onMoreButtonClick:()=>{W.logInteraction(X.moreButtonFactory().hitUiReveal())}}))))}))},4754:(e,t,a)=>{a.r(t),a.d(t,{default:()=>oa});var n=a(67294),r=a(51615),l=a(87577),i=a(14556),o=a(96206),s=a(70369),c=a(1663),m=a(28760),u=a(728),d=a(56802),g=a(25678),E=a(49961),p=a(85105);const y="GPPWAsVio35hH080drEK",k="f8FyVnjsXfG9VtTzk9Df",h="tpOdce3HYBF6ASz4MXdr",f="p9AillvR7MCZkOrv3U3h",b="zMqHdOQtjEEbcMV7YHe9",v="zPJ5qeQhpgUvKpAAlNpA",C="n3G4Y43jgF6wXOuj0X44",S=n.memo((function({coverArt:e,showAccessInfo:t,isOpen:a,toggleModal:l,backgroundColor:i}){const o=(0,r.k6)(),s=(0,d.o)();if((0,n.useEffect)((()=>{s({type:"view",intent:"audiobook-gated-entry-point"})}),[s]),!t||!t.partnerLink)return null;const{partnerLink:{title:c,body:S,soaPartners:P}}=t,w=(0,E.X)(e,{desiredSize:640}),N={"--bg-color":i};return n.createElement(p.Z,{contentLabel:"activation-modal",isOpen:a,onRequestClose:l},n.createElement("div",{className:y,style:{...N}},n.createElement(g.Ee,{loading:"lazy",src:w?.url,className:k}),n.createElement("div",{className:h},n.createElement(m.Dy,{as:"p",variant:"canon",className:f},c),n.createElement(m.Dy,{as:"p",className:b},S),P&&P?.map((e=>n.createElement("a",{href:e.linkUrl,className:v,key:e.linkUrl,onClick:()=>{s({type:"click",intent:"navigate-to-access-provider",itemIdSuffix:e.displayName}),l(),o.replace("?isUnlockingAudiobook=true")}},n.createElement("img",{src:e.logoUrl||"",alt:"",width:"24px"}),n.createElement("span",{className:C},n.createElement(m.Dy,{variant:"ballad"},e.displayName," ")),n.createElement(u.V,{iconSize:16})))))))}));var P=a(95661),w=a(22345),N=a(94184),x=a.n(N),A=a(67892);const I="nLNTsyonBwoRIzAv1AME",R="E4I5I7G2CfW32hLWZaqE",U=({title:e,uri:t,className:a,onClick:r,position:l})=>{const i=(0,n.useCallback)((e=>{r?.(e,{uri:t,position:l})}),[r,l,t]);return n.createElement(A.r,{"aria-label":e,className:x()(R,a),to:t,onClick:i},n.createElement(m.Dy,{dir:"auto",variant:"mestoBold"},e))};function D(e){return!!e.uri&&!!e.title}const F=({topics:e,className:t,onClick:a})=>n.createElement("div",{className:x()(I,t)},e.filter(D).map(((e,t)=>n.createElement(U,{key:e.uri,title:e.title,uri:e.uri,position:t,onClick:a}))));var M=a(20246),z=a(94233),B=a(44887),O=a(7469),L=a(42781);const T={container:"SpVoh9vvBN0kIwzfCiBh",isActive:"nsGHaEmn310z9W4RMbb8",title:"PfYVlZzroXSurDmS_kxY",main:"kCT99_BcJQtW47mEfVF6",titleContainer:"gmDgEbPyRXNixmjYAT9f",duration:"itbbweiDUhLIrwEjSRWv",trailerContainer:"XlZGcb86bItwlMPQ2jOf",image:"VGTtqfOlX2jIbpff6mPP",imageContainer:"aexqooSgfdW95poEaxjH",playButton:"Fui2wGupk4F1Khigbrhj",entityImageLarge:"jWcvSz47NFpbLjnkFT1O",entityImageSmall:"Oo6MP8F01W5uGlnw8dag"};var _=a(55911),G=a(33985),X=a(87257),W=a(57978),j=a(95775),H=a(84788),Y=a(85592);let q;!function(e){e.SMALL="small",e.LARGE="large"}(q||(q={}));const Z=({images:e,title:t,contentRating:a,duration:r,moreButton:l,onClick:i,onContextMenu:o,onTouchStart:s,onTouchEnd:c,isPlaying:u,isActive:d,size:g,className:E,label:p})=>{const y=g===q.LARGE?"md":"sm",{badges:k}=(0,H.r)({contentRating:a});return n.createElement("div",{"data-testid":"trailer-component",className:x()(T.container,E,{[T.isActive]:d}),onContextMenu:o,onTouchStart:s,onTouchEnd:c},n.createElement("div",{className:T.main},n.createElement("div",{className:T.imageContainer},n.createElement(B.O,{type:L.p.EPISODE,title:t,className:x()(T.image,{[T.entityImageSmall]:g===q.SMALL,[T.entityImageLarge]:g===q.LARGE}),size:O.m$.SIZE_56,images:e,shape:B.K.ROUNDED_CORNERS}),n.createElement("div",{className:T.playButton},n.createElement(Y.fh,{"data-testid":"trailer-play-button",version:_.ul.transparent,size:y,isPlaying:u,onClick:i}))),n.createElement("div",{className:T.metadata},n.createElement("div",{className:T.titleContainer},n.createElement(m.Dy,{dir:"auto",className:T.title,variant:"balladBold"},t)),n.createElement("div",{className:T.trailerContainer},n.createElement(j.V,{text:p}),k.explicit&&n.createElement(X.N,null),k.nineteen&&n.createElement(W.X,null),n.createElement(m.Dy,{dir:"auto",variant:"mesto"},n.createElement(G.nL,{durationMs:r}))))),l)};var V=a(40080),K=a(43620),$=a(84242),J=a(9983),Q=a(27999),ee=a(20238);const te={sectionTitle:"igKG5CnS4gyhXQWp5GVu",author:"E8g_EyijtSREXL0vMFbL",narrator:"Pc8AKn4KmzHwEw8lPiSb",topics:"yE1clVJOE3LrEuOvUxxq"},ae=({htmlDescription:e,narrators:t})=>{const a=(0,d.o)(),r=(0,n.useCallback)((()=>{a({intent:"expand-description",type:"click"})}),[a]);return n.createElement(n.Fragment,null,t.length?n.createElement(m.Dy,{as:"p",variant:"ballad",className:te.narrator},o.ag.get("web-player.audiobooks.narratedByX",t.join(o.ag.getSeparator()))):null,e&&n.createElement(ee.o,{maxLines:4,content:e,htmlContent:e,LinkComponent:A.Z,onExpanded:r,className:te.description}))};var ne=a(4383),re=a(90110);const le=n.memo((function({uri:e,size:t=re.q.md,className:a,onClick:r}){const[l,i]=(0,ne.Z)(e),o=(0,d.o)(),s=(0,n.useCallback)((()=>{o({targetUri:e,intent:l?"unsave":"save",type:"click"}),i(!l)}),[o,e,l,i]);return n.createElement(re.o,{className:a,isFollowing:l,onFollow:s,onClick:r,uri:e,size:t})}));var ie=a(28137);const oe="fh0UJnx_1gVzGAmFaePG",se="CtQWnvRuRmBLt50eOSQL";var ce=a(30947),me=a(11414),ue=a(32626),de=a(98778),ge=a(55120),Ee=a(4236);const pe=n.memo((({children:e})=>n.createElement("div",{className:oe},e))),ye=n.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:r,isExplicit:l,togglePlay:i,isLocked:s,duration:c,publishDate:u}){const[g,E]=(0,ne.Z)(t),p=!(0,Ee.k)(),y=(0,d.o)(),k=(0,n.useCallback)((()=>{y({targetUri:t,intent:g?"unsave":"save",type:"click"}),E(!g)}),[y,t,g,E]);return n.createElement(ce.o,{backgroundColor:e},n.createElement(pe,null,l&&n.createElement(X.N,null),n.createElement("div",null,u&&n.createElement(m.Dy,{variant:"mesto",className:se},o.ag.formatDate(u)),n.createElement(m.Dy,{variant:"mesto"},n.createElement(G.nL,{durationMs:c})))),n.createElement(ce.F,null,n.createElement(ge.$,{onClick:()=>i(),isPlaying:r,size:_.qE.lg,uri:t,locked:s}),n.createElement(de.r,{key:"follow-button"},n.createElement(me.H,{isAdded:g,onClick:k,disabled:p,size:me.q.md,isAudiobook:!0})),s&&n.createElement(le,{uri:t}),n.createElement(ue.yj,{menu:n.createElement(ie.X,{uri:t})},n.createElement(P.z,{label:o.ag.get("more.label.context",a)}))))}));var ke=a(42273),he=a(59482),fe=a(72907);const be=n.memo((function({coverArt:e,name:t,authorName:a,uri:r,backgroundColor:l,isPlaying:i,togglePlay:s,isLocked:c}){return n.createElement(ke.gF,{backgroundColor:l},n.createElement(he.W,null,n.createElement(ge.$,{size:_.qE.sm,onClick:()=>s(),isPlaying:i,uri:r,locked:c}),n.createElement(fe.i,{text:t,dragUri:r,dragLabel:t})),n.createElement(ue._P,{menu:n.createElement(ie.X,{uri:r})},n.createElement(ke.Oz,{images:e,name:t,shape:B.K.ROUNDED_CORNERS})),n.createElement(ke.sP,null,n.createElement(ke.dy,{small:!0,uppercase:!0},o.ag.get("web-player.audiobooks.audiobook")),n.createElement(ke.xd,{canEdit:!1,onClick:()=>{}},t),n.createElement(ke.QS,{author:a})))}));var ve=a(42745),Ce=a(73305),Se=a(77868),Pe=a(89116);const we="_yl4tOZxcpoUt28k6B8I",Ne="lcJflizNrSwDM9yPNk6h",xe="ret7iHkCxcJvsZU14oPY",Ae=({rating:e,className:t,onClick:a})=>{const r=e?.rating?.rating?Se.u:Pe.G;if(!e)return null;const l=e.averageRating?.showAverage?n.createElement(m.Dy,{variant:"mesto",className:x()(xe)},"(",o.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"):null;return n.createElement("button",{className:x()(we,t),onClick:a},n.createElement(m.Dy,{dir:"auto",variant:"mestoBold"},e?.averageRating?.showAverage&&e.averageRating?.average?e.averageRating?.average:e?.rating?.rating?e.rating.rating:o.ag.get("web-player.audiobooks.noRating")),n.createElement(r,{iconSize:16,className:x()(Ne)}),l)};var Ie=a(54444);const Re=({rating:e,uri:t})=>{const{spec:a,logger:r}=(0,Ie.fU)(ve.createMobilePodcastRatingEventFactory,{data:{identifier:Ce.W.PODCAST_SHOW_AUDIOBOOK,uri:t}});return n.createElement(Ae,{rating:e,onClick:()=>{const e=a.ratingChipButtonFactory({identifier:t}).hitUiNavigate({destination:`spotify:show:${t}:ratings`});r.logInteraction(e)}})};var Ue=a(33241),De=a(192);var Fe=a(86649),Me=a(60410),ze=a(69518),Be=a.n(ze),Oe=a(75016),Le=a(26010),Te=a(69010),_e=a(8341),Ge=a(5944),Xe=a(92408),We=a(31610);const je="BO8KtKFwgSHtMt6PAmuv",He="b0Vng72SrQiFroJKXfk2",Ye="eWxDd0LanTnTlSl8SOHX",qe="eAOkseqV13_CAmzuDJpa",Ze="fovofKIYdEIURgIYoKm2",Ve="we_1b4qCQBaFPT12eUXp",Ke="NXXFrQO7npgPCRuSKaAA",$e="ekkhhuxKVGAzkEmuh9kE",Je="zd6xqobF255bxHFtCmXy",Qe=n.memo((function({name:e,duration:t,uri:a,bookUri:l,bookName:i,usePlayContextItem:s,isLocked:c,isPlayable:u,resumePositionMs:g,isFullyPlayed:E,toggleActivationModal:p,isExplicit:y,is19PlusOnly:k}){const h=(0,r.k6)(),f=Be().from(a).toURLPath(!0),[b,v]=(0,n.useState)(E),C=(0,n.useRef)(g),{isPlaying:S,togglePlay:N}=s({uri:a}),I=(0,_e.Y)((e=>{if(e?.item?.uri===a){const t=(0,Ge.k)(e)??0;return C.current=t,t}return 0})),{useDownloading:R}=(0,n.useContext)(Le.I),{currentAvailability:U}=R(a),D=[Te.V8.YES,Te.V8.DOWNLOADING,Te.V8.WAITING].includes(U),F=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),M=(0,n.useCallback)((e=>{F(e),f&&h.push(f)}),[F,f,h]),z=(0,d.o)(),B=(0,n.useCallback)((e=>{F(e),c?(z({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),p()):N()}),[c,z,F,p,N]),O=(0,n.useCallback)((e=>{e||(C.current=0),v(e)}),[]);return n.createElement(ue._P,{menu:n.createElement(w.r,{uri:a,showUri:l,isPlayed:b,onMarkAsPlayed:O})},n.createElement("div",{className:qe},n.createElement(A.r,{to:a,onClick:M,className:je,tabIndex:-1},n.createElement("hr",{className:Ye,"aria-hidden":!0}),n.createElement("div",{className:He},n.createElement(m.Dy,{as:"h2",variant:"balladBold",className:Ke,semanticColor:"textBase"},e),n.createElement("div",{className:$e},n.createElement(Y.fh,{size:"sm",version:Y.ul.secondary,onClick:B,isPlaying:S,ariaPlayLabel:o.ag.get("tracklist.a11y.play",e,i),ariaPauseLabel:o.ag.get("tracklist.a11y.pause",e,i),locked:c,disabled:!u&&!c}),c?n.createElement(Oe.g,null):null,y&&n.createElement(X.N,null),k&&n.createElement(W.X,{size:16}),n.createElement("div",{className:Je},n.createElement(Xe.E,{isPlaying:S,fullyPlayed:b,durationMs:t.milliseconds,resumePositionMs:C.current,position:S?I:void 0}))),n.createElement(ue.yj,{menu:n.createElement(w.r,{uri:a,showUri:l,isPlayed:b,onMarkAsPlayed:O})},n.createElement(P.z,{className:Ze,size:We.q.sm,label:o.ag.get("more.label.context",e),onClick:F})),n.createElement(We.o,{uri:a,bookUri:l,className:x()({[Ve]:!D}),onClick:F,size:We.q.sm})))))})),et=({bookUri:e,bookName:t,isFinishedUnlockingJourney:a,usePlayContextItem:r,toggleModal:l,setIsLocked:i})=>{const o=function(e,t){const a=(0,De.z)();return(0,n.useCallback)((async(n,r)=>a.getBookContents(e,{offset:n,limit:r,doRefreshSubscription:t})),[t,a,e])}(e,a),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),[m,u]=(0,n.useState)([]),d=(0,n.useCallback)((()=>{o&&(s.current||null===c.current||(s.current=!0,o(c.current,50).then((e=>{s.current=!1,c.current=e.nextOffset,e.items.length>0&&u((t=>t.concat(e.items)))}))))}),[o]);return(0,n.useEffect)((()=>{i((0,Me.g)(m))}),[m,i]),n.createElement("ul",null,n.createElement(Ue.C,{onReachBottom:d,triggerOnInitialLoad:!0},m.map((a=>{const{name:i,duration:o,uri:s,playability:{playable:c},playedState:{playPositionMilliseconds:m,state:u},isExplicit:d,is19PlusOnly:g}=a;return n.createElement(Qe,{name:i,duration:o,uri:s,bookUri:e,bookName:t,key:s,usePlayContextItem:r,isLocked:(0,Me.S)(a),isPlayable:c,resumePositionMs:m,isFullyPlayed:u===Fe.sY.Completed,toggleActivationModal:l,isExplicit:d,is19PlusOnly:g})}))))},tt={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",BookPage:"mmCZ5VczybT9VqKB5wFU",bookContent:"At_ihDspJfh1yw3Cn2cq",metadataLeft:"Yqz1Nv6wj1n3HmXL_qji",metadataRight:"qRqn3JrWLPbGW9k2a63n",ratingAndTopics:"HAah1_lK_dHgyyE71I8Z",chapters:"eiC4nh70nb5UHZBYMgNA"},at=n.memo((function({metadata:e}){const{uri:t,coverArt:a,name:l,htmlDescription:i,authorName:c,sample:m,narrators:u,rating:g,isExplicit:E,duration:p,copyrights:y,publishDate:k}=e,{search:h}=(0,r.TH)(),f=!!new URLSearchParams(h).get("isUnlockingAudiobook"),b=!(!(0,V.D)(f)||f),v=(0,K.Z)(a[0]?.url),[C,N]=(0,n.useState)(!1),x=(0,d.o)(),[A,I]=(0,n.useState)(!1);(0,n.useEffect)((()=>{x({type:"view",intent:"audiobook"})}),[x]);const R=(0,n.useCallback)((()=>{C||x({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-header"}),N(!C)}),[x,C]),U=(0,n.useCallback)((()=>(0,J.Q)({show_uri:t,currency:"USD",price:10})),[t]),D=(0,Q.ye)(t),{togglePlay:B,isPlaying:O,usePlayContextItem:L}=(0,$.n)({uri:t},{featureIdentifier:"audiobook"}),{isActive:T,isPlaying:_,togglePlay:G}=L({uri:m?.uri||""}),X=(0,n.useCallback)((()=>{m?.uri&&(x({targetUri:m.uri,intent:_?"play":"pause",type:"click"}),G())}),[_,x,G,m?.uri]),W=[{title:"Education",uri:"spotify:genre:educational_podcasts"}],j=W.length>0;return n.createElement("section",{className:tt.BookPage},n.createElement(s.$,null,o.ag.get("show.page-title",l)),n.createElement(be,{name:l,authorName:c,uri:t,coverArt:a,backgroundColor:v,togglePlay:A?U:B,isPlaying:O,isLocked:A}),n.createElement(ye,{name:l,backgroundColor:v,uri:t,togglePlay:A?U:B,isPlaying:O,isLocked:A,isExplicit:E,duration:p,publishDate:k}),n.createElement("div",{className:tt.bookContent},n.createElement("div",{className:tt.metadataLeft},n.createElement(ae,{htmlDescription:i,narrators:u})),n.createElement("div",{className:tt.metadataRight},m&&n.createElement(Z,{label:o.ag.get("sample"),className:tt.sample,images:m.coverArt||[],title:m.name,duration:m.duration.milliseconds,moreButton:n.createElement(M.y,{menu:n.createElement(w.r,{uri:m.uri,showUri:t})},n.createElement(P.z,null)),onClick:X,isPlaying:_,isActive:T,size:q.LARGE,contentRating:m.contentRating?.label}),n.createElement("div",{className:tt.ratingAndTopics},n.createElement(Re,{uri:t,rating:g}),j&&n.createElement(F,{topics:W,className:tt.topics}))),n.createElement("div",{className:tt.chapters},n.createElement(et,{bookUri:t,bookName:l,isFinishedUnlockingJourney:b,usePlayContextItem:L,toggleModal:R,setIsLocked:I}),n.createElement(z.k,{copyrights:y}))),C&&D&&n.createElement(S,{backgroundColor:v,isOpen:C,toggleModal:R,coverArt:a,showAccessInfo:D}))}));var nt=a(49207),rt=a(49125),lt=a(26382);const it={field:lt.ay.PUBLISH_DATE,order:lt.i5.DESC},ot={field:lt.ay.PUBLISH_DATE,order:lt.i5.ASC},st={episodic:it,sequential:ot,recent:it};function ct(){return new Map([[it,{key:"newest-to-oldest",value:o.ag.get("shows.sort.newest-to-oldest")}],[ot,{key:"oldest-to-newest",value:o.ag.get("shows.sort.oldest-to-newest")}]])}function mt(e){return st[e]}var ut=a(86514),dt=a(14535);const gt=({uri:e,name:t,backgroundColor:a,spec:r})=>{const l=(0,Ie.$P)(),i=(0,d.o)(),s=!(0,Ee.k)(),[c,m]=(0,ne.Z)(e),u=(0,n.useCallback)((()=>{i({targetUri:e,intent:c?"unsave":"save",type:"click"});const t=r.followButtonFactory();l.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),m(!c)}),[i,e,c,r,l,m]),g=(0,n.useCallback)((()=>{l.logInteraction(r.contextButtonFactory().hitUiReveal())}),[l,r]);return n.createElement(ce.o,{backgroundColor:a},n.createElement(ce.F,null,n.createElement(de.r,{key:"follow-button"},n.createElement(dt.e,{isFollowing:c,onClick:u,disabled:s})),n.createElement(M.y,{menu:n.createElement(ut.M,{uri:e}),onShow:g},n.createElement(P.z,{label:o.ag.get("more.label.context",t)}))))},Et=(0,n.lazy)((()=>a.e(8381).then(a.bind(a,18381))));function pt(e){return(0,l.W6)(nt.$f)?n.createElement(n.Suspense,{fallback:!0},n.createElement(Et,e)):null}var yt=a(25988),kt=a(38894),ht=a(80219),ft=a(18261),bt=a(89952),vt=a(47917),Ct=a(42922),St=a(18864),Pt=a(22583);const wt=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Nt=n.memo((function({uri:e,children:t}){return n.createElement(Pt.r,{uri:e,defaultState:[],sortContext:wt,localStorageKey:"showFilterParams-v2"},t)})),xt=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:mt("recent")}),At=e=>{const t=ct();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},It=n.memo((function({uri:e,children:t,defaultSortParam:a}){return n.createElement(Pt.r,{uri:e,defaultState:a,sortContext:xt,localStorageKey:"showSortParam",validator:At},t)})),Rt="cJJXVm4gQW6AdfCQRhpX",Ut="hTRqaN61SDG95erQGMmx",Dt={totalCount:0,nextOffset:0,items:[]},Ft=n.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,n.useContext)(xt),{sortState:r}=(0,n.useContext)(wt),l=(0,Q.ZM)(e.uri,a,r),[i,o]=(0,n.useState)(Dt),s=(0,n.useRef)(!1),c=(0,n.useRef)(0),{ref:m,breakpoint:u}=(0,St.Db)({[St.Uo.MEDIUM]:0,[St.Uo.LARGE]:600}),d=(0,n.useCallback)(((e=!1)=>{if(!l)return;const t=c.current;null!==t&&(s.current||(s.current=!0,l(t,50).then((a=>{o((n=>{const r=e?[]:[...n.items];return r.splice(t,a.items.length,...a.items),c.current=a.nextOffset,{...a,items:r}})),s.current=!1}))))}),[l]);return(0,n.useEffect)((()=>{o(Dt)}),[e.uri]),(0,n.useEffect)((()=>{c.current=0,d(!0)}),[d]),n.createElement(St.ZU.Provider,{value:u},n.createElement(Ct.ZP,{value:"track-list"},n.createElement("div",{ref:m},n.createElement(Ue.C,{onReachBottom:d,triggerOnInitialLoad:!0},i.items.map(((a,r)=>n.createElement("div",{className:Ut,key:`${r}${a.uri}`},n.createElement("hr",{className:Rt,"aria-hidden":!0}),n.createElement(vt.V,{key:`${a.uri}/${r}`,index:r,episode:a,showMetadata:e,usePlayContextItem:t}))))))))}));var Mt=a(95289);const zt={field:lt.YG.ISPLAYED,operator:lt.NK.EQUALS,value:!1},Bt={field:lt.YG.STARTEDPLAYING,operator:lt.NK.GREATER_THAN,value:0};const Ot="all-episodes",Lt=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(wt),r=new Map([[zt,{key:"is-played",value:o.ag.get("shows.filter.unplayed")}],[Bt,{key:"started-playing",value:o.ag.get("shows.filter.in-progress")}]]),l=Array.from(r.values());l.unshift({key:Ot,value:o.ag.get("mwp.podcast.all.episodes")});const i=Array.from(r.keys()),s=(0,n.useCallback)((t=>{if(t===Ot)a([]);else{const e=i.find((e=>r.get(e)?.key===t));e&&a([e])}e()}),[e,a,i,r]);if(!r.size||!i)return null;let c=l[0];const m=Array.from(r.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return m.length>0&&(c=m[0][1]),n.createElement(Mt.A,{options:l,onSelect:e=>s(e),selected:c,variant:"balladBold",semanticColor:"textBase",heading:o.ag.get("drop_down.filter_by")})},Tt=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(xt),r=ct(),l=Array.from(r.values()),i=Array.from(r.keys()),s=(0,n.useCallback)((t=>{const n=i.find((e=>r.get(e)?.key===t));n&&a(n),e()}),[i,e,r,a]);if(!r.size||!t)return null;const c=Array.from(r.keys()).find((e=>e.field===t.field&&e.order===t.order)),m=r.get(c);return n.createElement(Mt.A,{options:l,onSelect:e=>s(e),selected:m,heading:o.ag.get("drop_down.sort_by")})},_t="aQMtxnKeiJqZ9XCcDuZ7",Gt="TYB4Y2xQujO7cifhHush",Xt="YJlizbhw6DBPHT9OYbdj",Wt="klz_XuZpllvTMzpJF1gw",jt="TfjbWiK8hca4HHEBnonP",Ht="kR0M2WSYVUj4cohADSFM",Yt="ghfuv80I8uW_ymG_jfx9",qt="jtfSxoRam9rzTtdXIjzc",Zt="fejGrhq7pxGC99cUdyVw",Vt="T0OjvsNXAJJGd23eBG2m",Kt=({spec:e})=>{const t=(0,Ie.$P)(),{canSort:a,canFilter:r}=(0,Q.zZ)().capabilities,l=(0,n.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),i=(0,n.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return n.createElement("div",{className:Ht},r&&n.createElement("div",{className:qt},n.createElement(Lt,{onFilter:l})),!r&&n.createElement(m.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:Zt},o.ag.get("mwp.podcast.all.episodes")),a&&n.createElement("div",{className:Yt},n.createElement(Tt,{onSort:i})))},$t=({metadata:e,showId:t,spec:a})=>{const{uri:r,trailer:i,topics:s,description:c,htmlDescription:u}=e,g=(0,Ie.$P)(),E=(0,n.useMemo)((()=>a.episodeListFactory()),[a]),p=(0,d.o)(),y=(0,l.W6)(nt.Cz),k=(0,kt.g)(),{sortState:h}=(0,n.useContext)(xt),{sortState:f}=(0,n.useContext)(wt),b=(0,Q.zZ)(),{usePlayContextItem:v}=(0,$.n)({uri:r,metadata:{[bt.sb.SORTING_CRITERIA]:b.getPlayerSort(h),[bt.sb.FILTERING_PREDICATE]:b.getPlayerFilter(f)}},{featureIdentifier:"show"}),{isActive:C,isPlaying:S,togglePlay:w}=v({uri:i?.uri||""}),N=(0,n.useCallback)((e=>{p({intent:"expand-description",type:"click"});const t=a.aboutSectionFactory().seeMoreButtonFactory(),n=e?t.hitUiReveal():t.hitUiHide();g.logInteraction(n)}),[g,p,a]),x=(0,n.useCallback)(((e,t)=>{const n=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});g.logInteraction(n)}),[g,a]),I=(0,vt.e)(e),R=(0,ht.s)(i,I),U=(0,n.useCallback)((()=>{i?.uri&&(k?R():(p({targetUri:i.uri,intent:S?"play":"pause",type:"click"}),w()))}),[R,k,S,p,w,i?.uri]),D=s.length>0,B=c||y&&u,O=B||D;return n.createElement("div",{className:Gt},n.createElement("div",{className:Xt},O&&n.createElement(n.Fragment,null,n.createElement(m.Dy,{as:"h3",variant:"canon",semanticColor:"textBase",className:Zt},o.ag.get("artist.about")),B&&n.createElement(ee.o,{maxLines:4,content:(c||"").trim(),onExpanded:N,htmlContent:y&&u?u:void 0,LinkComponent:A.Z}),D&&n.createElement(F,{topics:s,onClick:x})),n.createElement(pt,{showId:t,uri:r}),i&&n.createElement(ft._,{menu:n.createElement(yt.k,{uri:i.uri,showUri:r,sharingInfo:i.sharingInfo})},n.createElement(Z,{label:o.ag.get("track-trailer"),className:Vt,images:i.coverArt||[],title:i.name,duration:i.duration.milliseconds,moreButton:n.createElement(M.y,{menu:n.createElement(yt.k,{uri:i.uri,sharingInfo:i.sharingInfo,showUri:r})},n.createElement(P.z,null)),onClick:U,isPlaying:S,isActive:C,size:q.LARGE,contentRating:i.contentRating?.label}))),n.createElement("div",{className:jt,"data-testid":"show-all-episode-list"},n.createElement(Kt,{spec:a}),n.createElement(Ie.Nh,{spec:E},n.createElement(Ft,{showMetadata:e,usePlayContextItem:v}))),n.createElement(z.k,{copyrights:[]}))};var Jt=a(51775);const Qt=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:r,name:l,podcastType:i,publisherName:s}=e,{isXSOnly:c,isSMOnly:m}=(0,Jt.e)(),u=c||m;return n.createElement(ke.gF,{backgroundColor:t},n.createElement(he.W,null,n.createElement(fe.i,{text:l,dragUri:a,dragLabel:l})),n.createElement("div",{className:Wt},n.createElement(ft._,{menu:n.createElement(ut.M,{uri:a})},n.createElement(ke.Oe,{loading:"eager",name:l,images:r,placeholderType:"show",shape:ke.Kc.ROUNDED_CORNERS}))),n.createElement(ke.sP,null,n.createElement(ke.dy,{small:!0,uppercase:!0},"SHOW"===i?o.ag.get("type.show"):o.ag.get("type.podcast")),n.createElement(ft._,{menu:n.createElement(ut.M,{uri:a})},n.createElement(ke.xd,{dragUri:a,dragLabel:l},n.createElement("span",{"data-testid":"show-title"},l))),n.createElement(ke.dy,{large:!u,medium:u,bold:!0},s)))};var ea=a(46877),ta=a(16061),aa=a(19480);const na={totalCount:0,nextOffset:0,items:[]};const ra=({metadata:e})=>{const t=function(e){const t=(0,Q.zZ)(),[a,r]=(0,n.useState)(na),l=(0,n.useCallback)((async()=>{const a=await t.getContents(e,{offset:0,limit:50});r(a)}),[e,t]);return(0,n.useEffect)((()=>{l()}),[l]),a}(e.uri);return n.createElement(aa.P,{className:"contentSpacing",total:t.items.length,title:ea.ag.get("episodes"),showAll:!0},t.items.map(((e,t)=>n.createElement(ta.B,{key:e.uri,index:t,uri:e.uri,name:e.name,images:e.coverArt,showImages:[],durationMilliseconds:e.duration.milliseconds,releaseDate:e.releaseDate?.isoString,resume_point:null,description:e.description,isExplicit:!1,is19PlusOnly:!1,sharingInfo:e.sharingInfo}))))},la=({metadata:e})=>n.createElement("section",null,n.createElement(s.$,null,"Podcasts from the user"),n.createElement(ra,{metadata:e})),ia=({metadata:e,showId:t})=>{const{coverArt:a,name:r,uri:l}=e,{spec:c}=(0,Ie.fU)(i.createDesktopPodcastEventFactory,{data:{uri:l}}),m=(0,n.useMemo)((()=>c.actionBarFactory()),[c]),u=(0,K.Z)(a[0]?.url||null);return n.createElement("section",{className:_t},n.createElement(s.$,null,o.ag.get("podcasts.show.seo.title",{name:r})),n.createElement(Qt,{metadata:e,backgroundColor:u}),n.createElement(gt,{uri:l,name:r,backgroundColor:u,spec:m}),n.createElement($t,{metadata:e,showId:t,spec:c}))},oa=n.memo((function(){const{showId:e}=(0,r.UO)(),t=`spotify:show:${e}`,a=(0,l.W6)(nt.uB),i=(0,l.W6)(nt.zR),s=(0,rt.l)(t,a);return s?(0,Fe.l6)(s)?n.createElement(n.Suspense,{fallback:null},n.createElement(at,{metadata:s})):(0,Fe.MP)(s)&&i?n.createElement(n.Suspense,{fallback:null},n.createElement(la,{metadata:s})):n.createElement(n.Suspense,{fallback:null},n.createElement(Nt,{uri:s.uri},n.createElement(It,{uri:s.uri,defaultSortParam:mt(s.consumptionOrder)},n.createElement(ia,{showId:e,metadata:s})))):n.createElement(c.h,{hasError:!1,errorMessage:o.ag.get("error.not_found.title.podcast")})}))},94233:(e,t,a)=>{a.d(t,{k:()=>i});var n=a(67294),r=a(28760);const l="rTMkDBDp47Eo12ZEQv4U",i=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(Â©\s+)/,"").replace(/^(â„—\s+)/,"");let l;return l="C"===e.type?"Â©":"P"===e.type?"â„—":`(${e.type})`,n.createElement(r.Dy,{as:"p",variant:"finale",key:t,dir:"auto"},`${l} ${a}`)}));return t&&a.unshift(n.createElement(r.Dy,{as:"p",variant:"finale",key:a.length,dir:"auto"},t)),n.createElement("div",{className:l},a)}},14535:(e,t,a)=>{a.d(t,{e:()=>m});var n=a(67294),r=a(96206),l=a(94184),i=a.n(l);const o="aAr9nYtPsG7P2LRzciXc",s="fBTYgGyvIbHizHIj7AAX",c="oUzIIkcyBdRs7hrwbwIo",m=n.memo((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:l}){const m=e?r.ag.get("following"):r.ag.get("follow");return n.createElement("button",{type:"button",className:i()(o,{[s]:e,[c]:a}),onClick:t},l||m)}))}}]);
//# sourceMappingURL=xpui-routes-show.js.map